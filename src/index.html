<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YOHO!BUY 有货-潮流服饰购物网站,时尚潮流购物风向标</title>
  <link rel="stylesheet" href="./css/current.css">
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./assets/iconfont.css">
</head>

<body>
  <header></header>
  <div class="carousel"></div>
  <div class="center-content">
    <div class="main"></div>
    <div class="s-more">
      <a href="#">查看更多</a>
    </div>
  </div>
  <footer></footer>
  <script type="module">
    var mapList = [];
    import Header from "./js/ES6/header.js"
    import Footer from "./js/ES6/footer.js"
    import GoodsMap from "./js/ES6/GoodsMap.js"
    import Carousel from "./js/ES6/carousel.js"
    var carousel;
    init();
    function init(){
      ajax();
      let header = new Header();
      let footer = new Footer();
      // let goodsMap = new GoodsMap(mapList);
      let map = Object.keys(mapList);
      map.forEach(function(item){
        let goodsMap = new GoodsMap(mapList[item],mapList[item].pop())
        goodsMap.appendTo(".main");
      })
      carousel = new Carousel();
      header.appendTo("header");
      carousel.appendTo(".carousel")
      // goodsMap.appendTo(".main")
      footer.appendTo("footer");
      animation();
    }
    function animation(){
      requestAnimationFrame(animation);
      carousel.autoplay();
    }
    function ajax(){
    var xhr=new XMLHttpRequest();
    xhr.addEventListener("load",loadHandler);
    xhr.open("GET","./JSON.json",false);
    xhr.send();
    }
    function loadHandler(e){
      var xhr=e.currentTarget;
      var res=JSON.parse(xhr.response);
      mapList = res.mapList;
  }
    

  </script>
</body>

</html>